From 315c344fffc1c681b3257413b1b992675aa6fb89 Mon Sep 17 00:00:00 2001
From: Chris Ye <yechunliangcn@163.com>
Date: Mon, 30 Sep 2019 16:03:29 +0800
Subject: [PATCH] debug tool

---
 DEBUG.log                     | 3 +++
 clang/utils/check_cfc/clang   | 1 +
 clang/utils/check_cfc/clang++ | 1 +
 llvm/make.sh                  | 1 +
 llvm/tools/opt/Debugify.cpp   | 1 +
 5 files changed, 7 insertions(+)
 create mode 100644 DEBUG.log
 create mode 120000 clang/utils/check_cfc/clang
 create mode 120000 clang/utils/check_cfc/clang++
 create mode 100755 llvm/make.sh

diff --git a/DEBUG.log b/DEBUG.log
new file mode 100644
index 00000000000..5b60cb4bc10
--- /dev/null
+++ b/DEBUG.log
@@ -0,0 +1,3 @@
++#define LLVM_DEBUG2(X) do { X; } while (false)
++#undef NDEBUG
+
diff --git a/clang/utils/check_cfc/clang b/clang/utils/check_cfc/clang
new file mode 120000
index 00000000000..84120253b1e
--- /dev/null
+++ b/clang/utils/check_cfc/clang
@@ -0,0 +1 @@
+check_cfc.py
\ No newline at end of file
diff --git a/clang/utils/check_cfc/clang++ b/clang/utils/check_cfc/clang++
new file mode 120000
index 00000000000..84120253b1e
--- /dev/null
+++ b/clang/utils/check_cfc/clang++
@@ -0,0 +1 @@
+check_cfc.py
\ No newline at end of file
diff --git a/llvm/make.sh b/llvm/make.sh
new file mode 100755
index 00000000000..80a0c7a3cab
--- /dev/null
+++ b/llvm/make.sh
@@ -0,0 +1 @@
+cd ../build; make -j8 ; cd -
diff --git a/llvm/tools/opt/Debugify.cpp b/llvm/tools/opt/Debugify.cpp
index 222cc702bc1..d17513e267d 100644
--- a/llvm/tools/opt/Debugify.cpp
+++ b/llvm/tools/opt/Debugify.cpp
@@ -235,6 +235,7 @@ bool checkDebugifyMetadata(Module &M,
   BitVector MissingLines{OriginalNumLines, true};
   BitVector MissingVars{OriginalNumVars, true};
   for (Function &F : Functions) {
+    dbgs() << "chrisDebugify: F:" << F << "\n";
     if (isFunctionSkipped(F))
       continue;
 
-- 
2.17.1

